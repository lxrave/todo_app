# Контракты типов и хранилища: Todo List

**Фича**: 001-todo-list  
**Назначение**: Описание типов данных и API хранилища задач (для реализации в `src/types` и Pinia store).

---

## Тип Task

```ts
interface Task {
  id: string;
  text: string;
  completed: boolean;
  order: number;
}
```

- `id`: уникален в рамках списка, неизменяемый после создания.
- `text`: строка, при создании не пустая после `trim`.
- `completed`: булево; переключается действием пользователя.
- `order`: число; меньше = выше в списке; при reorder обновляется у затронутых задач.

---

## API хранилища (Pinia store)

Хранилище экспортирует состояние и действия, описанные ниже. Имена — ориентировочные (можно заменить на принятые в проекте).

**State**:
- `tasks: Task[]` — массив задач, отсортированный по `order`.

**Actions**:
- `addTask(text: string): void` — добавить задачу с переданным text (после trim); не добавлять, если text пустой. Генерировать id и order, затем сохранить в localStorage.
- `toggleTask(id: string): void` — переключить `completed` задачи с данным id; если задача не найдена — no-op. Сохранить в localStorage.
- `reorderTasks(fromIndex: number, toIndex: number): void` — изменить порядок: переместить задачу с индекса fromIndex на toIndex; пересчитать order у затронутых задач и сохранить в localStorage.
- (Опционально) `loadTasks(): void` — инициализация: прочитать из localStorage и установить tasks; при ошибке — пустой массив.

**Getters** (по необходимости):
- `sortedTasks`: вычисляемый список задач, отсортированный по `order`.

---

## Ключ localStorage

- Один ключ для массива задач (например, `todo-app-tasks`).
- Значение: JSON-строка массива `Task[]`.

---

## Валидация на границах

- При загрузке: если JSON невалиден или не массив — считать `tasks = []`.
- При вызове `addTask('')` или `addTask('   ')`: не добавлять задачу; вызывающая сторона (UI) должна не допускать отправки пустого текста и показывать обратную связь (FR-006).
