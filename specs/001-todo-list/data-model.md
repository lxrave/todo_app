# Модель данных: Todo List

**Фича**: 001-todo-list  
**Дата**: 2026-02-16

---

## Сущности

### Task (Задача)

| Поле       | Тип     | Обязательное | Описание |
|-----------|----------|--------------|----------|
| id        | string   | да           | Уникальный идентификатор (генерируется при создании, например nanoid/UUID). |
| text      | string   | да           | Текст задачи. Не пустая строка после trim (валидация по FR-006). |
| completed | boolean  | да           | Статус: true — выполнена, false — не выполнена. |
| order     | number   | да           | Порядок отображения в списке (меньше = выше). При перетаскивании пересчитывается. |

**Правила**:
- При создании: id генерируется; text не пустой после trim; completed = false; order = max(existing orders) + 1 или 0 для первой задачи.
- Переключение статуса: инверсия completed без изменения остальных полей.
- Переупорядочивание: обновление order у затронутых задач и сохранение в хранилище.

**Переходы состояния**: Нет формальной машины состояний; единственное изменение — переключение completed.

---

### TodoList (список задач)

- Упорядоченная коллекция задач: массив `Task[]`.
- Порядок отображения: сортировка по полю `order` по возрастанию.
- Хранение: один JSON-массив в localStorage (ключ — константа приложения).
- Операции: добавить задачу, удалить (если понадобится позже), обновить задачу (toggle, изменить text), изменить порядок (reorder).

---

## Валидация (из требований)

- **FR-006**: Не создавать задачу с пустым text (после trim). Обратная связь в UI (неактивная кнопка и/или сообщение).
- **FR-007**: Любой ввод и действия не должны приводить к падению или порче данных; при ошибке сериализации/десериализации — fallback (например, пустой массив) и по возможности уведомление.

---

## Персистенция

- **Чтение**: При инициализации приложения читать из localStorage ключ с задачами; при невалидном JSON или отсутствии ключа считать список пустым.
- **Запись**: После каждой мутации списка (add, toggle, reorder) сериализовать массив задач в JSON и записать в тот же ключ. Обрабатывать исключения (например, quota exceeded) без падения приложения.
