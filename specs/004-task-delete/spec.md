# Спецификация: Удаление задачи

**Ветка фичи**: `004-task-delete`  
**Создано**: 2026-02-16  
**Статус**: Черновик  
**Ввод**: Нужно добавить удаление таски. Рядом с карточкой таски при ховере будет появляться иконка с корзиной; при клике на неё таска безвозвратно удаляется. Обязательно добавить конфирм диалог.

## Уточнения

### Session 2026-02-16

- Q: На тач-устройствах нет hover — как показывать иконку корзины? → A: Option B — иконка корзины всегда видна на каждой карточке (без привязки к hover).
- Q: Где располагается иконка корзины? → A: Справа внутри карточки; на мобиле текст не должен перекрывать иконку.
- Q: Как закрыть диалог без удаления? → A: Option B — кнопка «Отмена» + Escape + клик вне диалога (все приравниваются к отмене).
- Q: Текст в диалоге подтверждения? → A: Option B — с названием задачи: «Удалить задачу «[текст задачи]»?».

## Пользовательские сценарии и проверки *(обязательно)*

### User Story 1 — Удаление задачи по иконке корзины с подтверждением (Приоритет: P1)

На каждой карточке задачи справа внутри карточки отображается иконка корзины (всегда видна, в т.ч. на мобиле; текст задачи не перекрывает иконку). При клике на иконку открывается диалог подтверждения с текстом в духе «Удалить задачу «[текст задачи]»?» и кнопками «Отмена» и «Удалить». При подтверждении задача безвозвратно удаляется из списка и исчезает с экрана; данные сохраняются (после перезагрузки задачи нет). При отмене диалог закрывается, задача остаётся.

**Почему этот приоритет**: Без этого сценария фича удаления не реализована.

**Независимая проверка**: Добавить задачу → увидеть иконку корзины на карточке → кликнуть по ней → в диалоге нажать «Удалить» → задача исчезла; перезагрузить страницу — задачи нет. Повторить с «Отмена» — задача остаётся.

**Сценарии приёмки**:

1. **Дано** в списке есть хотя бы одна задача, **Когда** пользователь смотрит на карточку задачи, **Тогда** на карточке отображается иконка корзины (trash) — всегда видимая, в т.ч. на тач-устройствах без hover.
2. **Дано** иконка корзины видна на карточке, **Когда** пользователь кликает/тапает по иконке, **Тогда** открывается диалог подтверждения с текстом «Удалить задачу «[текст этой задачи]»?» и двумя действиями: отмена (закрыть без удаления) и подтверждение удаления. Закрытие без удаления возможно также по клавише Escape и по клику по области вне диалога.
3. **Дано** открыт диалог подтверждения, **Когда** пользователь нажимает подтверждение удаления, **Тогда** диалог закрывается, задача исчезает из списка и больше не отображается; после перезагрузки страницы эта задача отсутствует (удаление безвозвратное).
4. **Дано** открыт диалог подтверждения, **Когда** пользователь нажимает «Отмена», нажимает Escape или кликает по области вне диалога, **Тогда** диалог закрывается, задача остаётся в списке без изменений.

---

### Граничные случаи

- При одной задаче в списке после удаления отображается пустое состояние списка (как при отсутствии задач).
- Иконка корзины расположена справа внутри карточки; не перекрывает и не перекрывается текстом задачи (на мобиле обеспечить разметку так, чтобы текст не заходил на иконку). Иконка доступна для клика/тапа на десктопе и тач-устройствах.
- Удаление необратимо: восстановление удалённой задачи в рамках этой фичи не предусмотрено.

## Требования *(обязательно)*

### Функциональные требования

- **FR-001**: На каждой карточке задачи справа внутри карточки должна быть всегда видимая иконка корзины (trash), доступная для клика и тапа; на мобиле текст задачи не должен перекрывать иконку.
- **FR-002**: При клике по иконке корзины система должна показывать диалог подтверждения с текстом «Удалить задачу «[текст задачи]»?» и двумя вариантами: отмена (не удалять) и подтверждение (удалить). Закрытие без удаления возможно также по Escape и по клику вне диалога.
- **FR-003**: При подтверждении удаления в диалоге система должна безвозвратно удалить задачу из списка: она исчезает с экрана и не появляется после перезагрузки страницы.
- **FR-004**: При нажатии «Отмена», Escape или клике вне диалога задача не удаляется, диалог закрывается.
- **FR-005**: Состояние списка после удаления (включая пустой список) должно сохраняться и отображаться корректно после перезагрузки.

### Ключевые сущности

- **Задача (Task)**: элемент списка; после подтверждённого удаления исключается из данных приложения и не восстанавливается в рамках фичи.

## Критерии успеха *(обязательно)*

### Измеримые результаты

- **SC-001**: Пользователь может удалить любую задачу из списка не более чем за два действия (клик по иконке корзины + подтверждение в диалоге).
- **SC-002**: Случайное удаление снижено за счёт обязательного диалога подтверждения: без подтверждения задача не удаляется.
- **SC-003**: После удаления список и пустое состояние отображаются корректно; при перезагрузке удалённая задача не появляется.
