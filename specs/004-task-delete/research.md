# Research: Удаление задачи (004-task-delete)

**Фича**: 004-task-delete  
**Дата**: 2026-02-16

Решения по неочевидным техническим и UX-вопросам в рамках спецификации.

---

## 1. Диалог подтверждения: нативный vs кастомный

**Decision**: Кастомный модальный диалог в разметке приложения (не `window.confirm`).

**Rationale**: Спецификация требует текст «Удалить задачу «[текст задачи]»?» и две кнопки «Отмена» / «Удалить», а также закрытие по Escape и клику вне. Нативный `confirm()` не позволяет подставить текст задачи, не даёт единообразного оформления и не поддерживает клик вне. Кастомный диалог даёт полный контроль над текстом, кнопками и поведением.

**Alternatives considered**: `window.confirm` — отклонён из-за невозможности показать название задачи и единообразного UX. Сторонняя UI-библиотека модалок — возможна, но для одного диалога достаточно простого элемента в шаблоне (например, условный рендер с `role="dialog"` и обработкой Escape/click-outside).

---

## 2. Разметка карточки: иконка справа и мобиль

**Decision**: В одной строке с задачей: чекбокс | текст задачи (flex: 1, min-width: 0) | приоритет | иконка корзины. Иконка корзины всегда видна справа внутри карточки.

**Rationale**: Спецификация: иконка справа внутри карточки; на мобиле текст не должен перекрывать иконку. Ключевой приём — дать тексту `flex: 1` и `min-width: 0`, чтобы при нехватке места он сжимался/обрезался, а блоки приоритета и корзины оставались видимыми и кликабельными. Иконка не в отдельном hover-блоке — соответствует уточнению «всегда видна» (в т.ч. на тач-устройствах).

**Alternatives considered**: Показывать иконку только по hover — отклонено по уточнению (Option B: всегда видна). Выносить иконку за пределы карточки — отклонено (уточнение: внутри карточки справа).

---

## 3. Закрытие диалога (Escape, клик вне)

**Decision**: Обрабатывать клавишу Escape и клик по overlay (область вне диалога) как отмену; при отмене не вызывать `deleteTask`.

**Rationale**: Спецификация (Option B): кнопка «Отмена» + Escape + клик вне диалога приравниваются к отмене. Реализация: при монтировании диалога подписываться на `keydown` (Escape) и `click` по overlay; при срабатывании закрывать диалог без вызова store.deleteTask. Кнопка «Отмена» делает то же действие.

**Alternatives considered**: Только кнопка «Отмена» — отклонено по уточнению. Клик вне без overlay — неудобно; нужен явный overlay для «клика вне».

---

## 4. Иконка корзины (доступность и реализация)

**Decision**: Использовать кнопку с иконкой (SVG или символ/шрифт) и подписью для скринридеров, например `aria-label="Удалить задачу"`.

**Rationale**: Соответствие принципу интуитивного UX и доступности (конституция). Кнопка даёт фокус и корректную семантику; иконка без текста дополняется aria-label. Для визуала подойдёт распространённая иконка корзины (trash); без внедрения тяжёлой иконочной библиотеки — inline SVG или символ.

**Alternatives considered**: Только `<img>` без кнопки — хуже для доступности и клавиатуры. Тяжёлая иконочная библиотека — избыточно для одной иконки.
