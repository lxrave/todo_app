# Quickstart: запуск E2E-проверок Todo App

## Предусловия

- Установлены зависимости проекта: `npm install`
- В проекте настроен Playwright и установлены браузеры (выполняется при первой настройке E2E, см. задачи фичи).

## Запуск E2E

**Вариант A — приложение уже запущено** (удобно для отладки: сначала тесты, потом правки):

```bash
# Терминал 1
npm run dev

# Терминал 2 — тесты в headless Chrome против http://localhost:5173
npm run test:e2e:local
```

Сервер при этом не поднимается Playwright; тесты идут против уже работающего приложения. Если приложение на другом порту: `PLAYWRIGHT_BASE_URL=http://localhost:5175 npm run test:e2e:local`.

**Вариант B — Playwright сам поднимает сервер** (например, в CI):

```bash
npm run test:e2e
```

При первом запуске Playwright поднимет dev-сервер (Vite) по настройке `webServer` в `playwright.config.ts`.

## Что проверяется

1. **Добавление задачи** — ввод текста, нажатие «Добавить», появление задачи в списке.
2. **Переключение статуса** — клик по чекбоксу/задаче, проверка смены отображения (выполнена/не выполнена).
3. **Удаление** (если реализовано в приложении) — удаление задачи, исчезновение из списка.
4. **Персистентность** — добавление/переключение, перезагрузка страницы, проверка сохранения списка и статусов.

## Результат

- Все сценарии прошли — выход с кодом 0; в логе — количество пройденных тестов.
- Один или более сценариев упали — выход с ненулевым кодом; в отчёте указаны упавшие тесты и при необходимости артефакты (скриншот, trace).

## Отладка

```bash
# Запуск в headed-режиме (видимый браузер)
npx playwright test --headed

# Режим отладки (пошаговое выполнение)
npx playwright test --debug

# Запуск одного файла сценариев
npx playwright test tests/e2e/todo-add.spec.ts
```

## CI

Команда `npm run test:e2e` (или `npx playwright test`) должна выполняться в CI после сборки или параллельно с поднятием dev-сервера; конфиг Playwright настраивается на headless и при необходимости на повторные попытки при нестабильности.
