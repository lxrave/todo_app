# Контракт: селекторы и структура страницы для E2E

E2E-сценарии полагаются на стабильные точки взаимодействия с Todo App. Изменения в приложении не должны ломать тесты без обновления этого контракта и самих тестов.

## Страница: главный экран (список задач)

- **Заголовок**: элемент с текстом «Задачи» (например, заголовок страницы).
- **Форма добавления**:
  - Поле ввода: роль `textbox`, плейсхолдер «Текст задачи» (или доступное имя).
  - Кнопка отправки: роль `button`, текст «Добавить».
- **Пустое состояние**: при пустом списке — текст вида «Список пуст» или «Добавьте задачу» (одна строка или контейнер с таким сообщением).
- **Список задач**:
  - Контейнер списка: роль `list` или группа элементов списка (например, `ul` с классом или тегом).
  - Элемент задачи: роль `listitem` или контейнер с текстом задачи и чекбоксом.
  - Чекбокс: роль `checkbox`; атрибут `aria-label` или связанный текст для «выполнена»/«не выполнена».
  - Текст задачи: видимый текст элемента задачи; выполненная задача может иметь зачёркнутый текст или класс (например, `completed`).

## Действия, которые должны быть доступны E2E

1. **Добавить задачу**: ввести текст в поле, нажать кнопку «Добавить».
2. **Переключить статус**: клик по чекбоксу задачи или по элементу задачи (если переключение по клику по строке).
3. **Удалить задачу** (004-task-delete): кнопка с `aria-label="Удалить задачу"` внутри карточки; диалог подтверждения с кнопками «Отмена» и «Удалить». Селекторы и сценарии: `specs/004-task-delete/contracts/e2e-selectors.md`.
4. **Приоритет задачи** (003-task-priority): у каждой задачи кнопка с текстом текущего приоритета (Low, Medium, High); по клику открывается список (роль `listbox`, имя «Выберите приоритет»), опции — `option` с именами Low, Medium, High. Отмена: Escape или клик вне — без сохранения.

## localStorage

- **Ключ**: `todo-app-tasks`.
- **Формат**: JSON-массив объектов задач (поля: id, text, completed, order, priority). E2E могут читать этот ключ после перезагрузки страницы для дополнительной проверки персистентности или полагаться только на отображение в UI.

## Рекомендуемые стратегии селекторов (Playwright)

- Предпочтительно: `getByRole('textbox', { name: ... })`, `getByRole('button', { name: 'Добавить' })`, `getByRole('listitem')`, `getByText('...')`.
- При необходимости: `data-testid` в приложении для стабильных элементов (опционально, не обязательно для первой версии).
- Избегать: селекторы только по внутренним классам компонентов (например, `.task-item__text`), если они не стабильны между релизами.

## Обслуживание

При изменении текстов кнопок, плейсхолдеров, структуры списка или добавлении удаления — обновить этот контракт и соответствующие E2E-тесты и page objects.
